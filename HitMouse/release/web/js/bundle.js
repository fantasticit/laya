!function(){"use strict";class e extends Laya.Script{constructor(){super()}onAwake(){this.timerLine=null}show(){this.timerLine&&this.timerLine.destroy(),this.owner.alpha=1,this.owner.rotation=0,this.timerLine=Laya.TimeLine.to(this.owner,{rotation:50},50).to(this.owner,{rotation:-30},100,null).to(this.owner,{alpha:0},100,null,100),this.timerLine.play(0,!1)}}class t extends Laya.Script{constructor(){super()}onAwake(){this.timerLine=null}show(e){this.timerLine&&this.timerLine.destroy(),this.owner.skin=`res/score_100_${e}.png`,this.timerLine=Laya.TimeLine.to(this.owner,{y:this.owner.y-100},150,Laya.Ease.backOut).to(this.owner,{alpha:0},150,Laya.Ease.backOut,300),this.timerLine.play(0,!1),this.timerLine.on(Laya.Event.COMPLETE,this,()=>{this.owner.removeSelf()})}}const s={holes:[{x:-245,y:0},{x:-5,y:0},{x:245,y:0},{x:-245,y:125},{x:-5,y:125},{x:245,y:125},{x:-245,y:270},{x:-5,y:270},{x:245,y:270}]},i=[1,2];class a extends Laya.Script{constructor(){super()}onAwake(){this.timerLine=null,this.gameManager=null,this.type=1,this.index=-1,this.isHited=!1}onClick(){this.isHited||(this.owner.skin=`res/mouse_hited_${this.type}.png`,this.timerLine&&(this.timerLine.destroy(),this.timerLine=null),this.timerLine=Laya.TimeLine.to(this.owner,{scaleX:0,scaleY:0},300,null,500),this.timerLine.play(0,!1),this.timerLine.on(Laya.Event.COMPLETE,this,()=>{this.owner.removeSelf(),this.gameManager.removeMouse(this)}),this.gameManager.onMouseHited(this),this.isHited=!0)}show(e,t,s){this.gameManager=e,this.index=t,this.type=s,this.owner.skin=`res/mouse_normal_${s}.png`,this.owner.scaleX=0,this.owner.scaleY=0,this.timerLine=Laya.TimeLine.to(this.owner,{scaleX:1,scaleY:1},300).to(this.owner,{scaleX:0,scaleY:0},300,null,1e3),this.timerLine.play(0,!1),this.timerLine.on(Laya.Event.COMPLETE,this,()=>{this.owner.removeSelf(),this.gameManager.removeMouse(this)})}}class n extends Laya.Script{constructor(){super(),this.currentScore=0,this.mouses=Array.from({length:s.holes.length},()=>null),this.dialogStartGameNode=null,this.dialogStartGameButtonNode=null,this.countdownNode=null,this.scoreNode=null,this.dialogGameOverNode=null,this.dialogGameOverScoreNode=null,this.mouseContainer=null,this.prefabMouse=null,this.hammerNode=null,this.floatScoreNode=null}onAwake(){this.isPlaying=!1,this.btnPlayAgainNode=null,this.dialogStartGameNode.visible=!0,this.dialogStartGameButtonNode.on(Laya.Event.MOUSE_DOWN,this,()=>{this.startGame()}),this.btnPlayAgainNode=this.dialogGameOverNode.getChildByName("btnPlayAgain"),this.btnPlayAgainNode.on(Laya.Event.MOUSE_DOWN,this,()=>{this.startGame()})}onCountDown(){this.currentCountdown--,this.currentCountdown<=0?(this.countdownNode.text="0",this.endGame()):this.countdownNode.text=""+this.currentCountdown}startGame(){this.isPlaying=!0,this.countdown=60,this.currentCountdown=this.countdown,this.currentScore=0,this.dialogStartGameNode.visible=!1,this.dialogGameOverNode.visible=!1,this.dialogGameOverScoreNode.text="0",this.countdownNode.text=""+this.currentCountdown,this.scoreNode.text="0",Laya.timer.loop(1e3,this,this.onCountDown),Laya.timer.once(1e3,this,this.generateMouse,[this.getRandomInt(1,this.mouses.length)])}endGame(){this.isPlaying=!1,this.dialogGameOverNode.visible=!0,this.dialogGameOverScoreNode.text=""+this.currentScore,Laya.timer.clear(this,this.onCountDown),Laya.SoundManager.playSound("sound/gameover.mp3",1)}addMouse(e){this.mouses[e.index]=e}removeMouse(e){this.mouses[e.index]=null}generateMouse(e){this.isPlaying&&(Array.from({length:e},(e,t)=>t).forEach(e=>{const t=this.prefabMouse.create(),n=s.holes[e];t.pos(n.x,n.y),this.mouseContainer.addChild(t);const o=t.getComponent(a);o.show(this,e,this.getRandomInt(1,i.length)),this.addMouse(o)}),Laya.timer.once(2e3,this,this.generateMouse,[this.getRandomInt(1,this.mouses.length)]))}onMouseHited(i){if(!this.isPlaying)return;const a=s.holes[i.index];Laya.SoundManager.playSound("sound/hit.mp3",1);const n=this.hammerNode.getComponent(e);this.hammerNode.pos(a.x+60,a.y-60),n.show();const o=this.floatScoreNode.create();o.pos(a.x-60,a.y-60),this.mouseContainer.addChild(o),o.getComponent(t).show(i.type),this.currentScore+=1===i.type?100:-100,this.scoreNode.text=""+this.currentScore}getRandomInt(e,t){return t<e?-1:e+~~(Math.random()*(t-e+1))}}class o{constructor(){}static init(){var s=Laya.ClassUtils.regClass;s("game/Hammer.ts",e),s("game/FloatScore.ts",t),s("game/GameManager.ts",n),s("game/Mouse.ts",a)}}o.width=960,o.height=640,o.scaleMode="fixedheight",o.screenMode="horizontal",o.alignV="middle",o.alignH="center",o.startScene="Main.scene",o.sceneRoot="",o.debug=!1,o.stat=!1,o.physicsDebug=!1,o.exportSceneToJson=!0,o.init();new class{constructor(){window.Laya3D?Laya3D.init(o.width,o.height):Laya.init(o.width,o.height,Laya.WebGL),Laya.Physics&&Laya.Physics.enable(),Laya.DebugPanel&&Laya.DebugPanel.enable(),Laya.stage.scaleMode=o.scaleMode,Laya.stage.screenMode=o.screenMode,Laya.stage.alignV=o.alignV,Laya.stage.alignH=o.alignH,Laya.URL.exportSceneToJson=o.exportSceneToJson,(o.debug||"true"==Laya.Utils.getQueryString("debug"))&&Laya.enableDebugPanel(),o.physicsDebug&&Laya.PhysicsDebugDraw&&Laya.PhysicsDebugDraw.enable(),o.stat&&Laya.Stat.show(),Laya.alertGlobalError(!0),Laya.ResourceVersion.enable("version.json",Laya.Handler.create(this,this.onVersionLoaded),Laya.ResourceVersion.FILENAME_VERSION)}onVersionLoaded(){Laya.AtlasInfoManager.enable("fileconfig.json",Laya.Handler.create(this,this.onConfigLoaded))}onConfigLoaded(){o.startScene&&Laya.Scene.open(o.startScene)}}}();